{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getHoverInformation = getHoverInformation;\n\nvar _getAutocompleteSuggestions = require(\"./getAutocompleteSuggestions\");\n\nvar _graphql = require(\"graphql\");\n/**\n *  Copyright (c) 2019 GraphQL Contributors\n *  All rights reserved.\n *\n *  This source code is licensed under the license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  \n */\n\n/**\n * Ported from codemirror-graphql\n * https://github.com/graphql/codemirror-graphql/blob/master/src/info.js\n */\n\n\nfunction getHoverInformation(schema, queryText, cursor, contextToken) {\n  var token = contextToken || (0, _getAutocompleteSuggestions.getTokenAtPosition)(queryText, cursor);\n\n  if (!schema || !token || !token.state) {\n    return [];\n  }\n\n  var state = token.state;\n  var kind = state.kind;\n  var step = state.step;\n  var typeInfo = (0, _getAutocompleteSuggestions.getTypeInfo)(schema, token.state);\n  var options = {\n    schema: schema\n  }; // Given a Schema and a Token, produce the contents of an info tooltip.\n  // To do this, create a div element that we will render \"into\" and then pass\n  // it to various rendering functions.\n\n  if (kind === 'Field' && step === 0 && typeInfo.fieldDef || kind === 'AliasedField' && step === 2 && typeInfo.fieldDef) {\n    var into = [];\n    renderField(into, typeInfo, options);\n    renderDescription(into, options, typeInfo.fieldDef);\n    return into.join('').trim();\n  } else if (kind === 'Directive' && step === 1 && typeInfo.directiveDef) {\n    var _into = [];\n    renderDirective(_into, typeInfo, options);\n    renderDescription(_into, options, typeInfo.directiveDef);\n    return _into.join('').trim();\n  } else if (kind === 'Argument' && step === 0 && typeInfo.argDef) {\n    var _into2 = [];\n    renderArg(_into2, typeInfo, options);\n    renderDescription(_into2, options, typeInfo.argDef);\n    return _into2.join('').trim();\n  } else if (kind === 'EnumValue' && typeInfo.enumValue && typeInfo.enumValue.description) {\n    var _into3 = [];\n    renderEnumValue(_into3, typeInfo, options);\n    renderDescription(_into3, options, typeInfo.enumValue);\n    return _into3.join('').trim();\n  } else if (kind === 'NamedType' && typeInfo.type && typeInfo.type.description) {\n    var _into4 = [];\n    renderType(_into4, typeInfo, options, typeInfo.type);\n    renderDescription(_into4, options, typeInfo.type);\n    return _into4.join('').trim();\n  }\n}\n\nfunction renderField(into, typeInfo, options) {\n  renderQualifiedField(into, typeInfo, options);\n  renderTypeAnnotation(into, typeInfo, options, typeInfo.type);\n}\n\nfunction renderQualifiedField(into, typeInfo, options) {\n  if (!typeInfo.fieldDef) {\n    return;\n  }\n\n  var fieldName = typeInfo.fieldDef.name;\n\n  if (fieldName.slice(0, 2) !== '__') {\n    renderType(into, typeInfo, options, typeInfo.parentType);\n    text(into, '.');\n  }\n\n  text(into, fieldName);\n}\n\nfunction renderDirective(into, typeInfo, options) {\n  if (!typeInfo.directiveDef) {\n    return;\n  }\n\n  var name = '@' + typeInfo.directiveDef.name;\n  text(into, name);\n}\n\nfunction renderArg(into, typeInfo, options) {\n  if (typeInfo.directiveDef) {\n    renderDirective(into, typeInfo, options);\n  } else if (typeInfo.fieldDef) {\n    renderQualifiedField(into, typeInfo, options);\n  }\n\n  if (!typeInfo.argDef) {\n    return;\n  }\n\n  var name = typeInfo.argDef.name;\n  text(into, '(');\n  text(into, name);\n  renderTypeAnnotation(into, typeInfo, options, typeInfo.inputType);\n  text(into, ')');\n}\n\nfunction renderTypeAnnotation(into, typeInfo, options, t) {\n  text(into, ': ');\n  renderType(into, typeInfo, options, t);\n}\n\nfunction renderEnumValue(into, typeInfo, options) {\n  if (!typeInfo.enumValue) {\n    return;\n  }\n\n  var name = typeInfo.enumValue.name;\n  renderType(into, typeInfo, options, typeInfo.inputType);\n  text(into, '.');\n  text(into, name);\n}\n\nfunction renderType(into, typeInfo, options, t) {\n  if (!t) {\n    return;\n  }\n\n  if (t instanceof _graphql.GraphQLNonNull) {\n    renderType(into, typeInfo, options, t.ofType);\n    text(into, '!');\n  } else if (t instanceof _graphql.GraphQLList) {\n    text(into, '[');\n    renderType(into, typeInfo, options, t.ofType);\n    text(into, ']');\n  } else {\n    text(into, t.name);\n  }\n}\n\nfunction renderDescription(into, options, def) {\n  if (!def) {\n    return;\n  }\n\n  var description = typeof def.description === 'string' ? def.description : null;\n\n  if (description) {\n    text(into, '\\n\\n');\n    text(into, description);\n  }\n\n  renderDeprecation(into, options, def);\n}\n\nfunction renderDeprecation(into, options, def) {\n  if (!def) {\n    return;\n  }\n\n  var reason = typeof def.deprecationReason === 'string' ? def.deprecationReason : null;\n\n  if (!reason) {\n    return;\n  }\n\n  text(into, '\\n\\n');\n  text(into, 'Deprecated: ');\n  text(into, reason);\n}\n\nfunction text(into, content) {\n  into.push(content);\n}","map":null,"metadata":{},"sourceType":"script"}